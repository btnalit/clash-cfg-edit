# ==================== åŸºç¡€é…ç½® ====================
mixed-port: 7890
redir-port: 7891
tproxy-port: 7892
port: 7893
socks-port: 7894
#intface-name: 172.18.0.7
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
# Web æ§åˆ¶é¢æ¿
external-controller: 0.0.0.0:9090
external-ui: /root/.config/mihomo/ui
external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"
secret: "mihomo123"
# GeoData é…ç½®
geodata-mode: true
geodata-loader: standard
tcp-concurrent: true
unified-delay: true
global-client-fingerprint: random
ntp:
  enable: true
  write-to-system: false
  server: ntp.aliyun.com
  port: 123
  interval: 30
# ==================== å—…æ¢ (Sniffer) ====================
sniffer:
  enable: true
  override-destination: true
  force-domain:
  - "+.netflix.com"
  - "+.nflxvideo.net"
  - "+.amazonaws.com"
  - "+.media.dssott.com"
  - '+.google.com'
  - '+.facebook.com'
  - '+.youtube.com'
  - '+.githubusercontent.com'
  - '+.googlevideo.com'
  - '+.tiktokv.us'
  - '+.tiktokcdn-us.com'
 
  skip-domain:
  - "+.apple.com"
  - Mijia Cloud
  - dlg.io.mi.com
  - "+.oray.com"
  - "+.sunlogin.net"
  - "+.push.apple.com"
  force-dns-mapping: true
  parse-pure-ip: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    QUIC:
      ports: [443, 8443]
    TLS:
      ports: [443, 8443]
# ==================== é€æ˜ä»£ç†æ ¸å¿ƒé…ç½® ====================
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53  
    - tcp://any:53  # æ¥ç®¡æ‰€æœ‰DNSè¯·æ±‚ï¼Œé˜²æ­¢DNSæ³„éœ²
    - udp://any:53  # æ¥ç®¡æ‰€æœ‰DNSè¯·æ±‚ï¼Œé˜²æ­¢DNSæ³„éœ²
  auto-route: true
  auto-detect-interface: true
  strict-route: true
  endpoint-independent-nat: true
  mtu: 1500

# ==================== DNSé…ç½® ====================
dns:
  enable: true
  listen: ':53'
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 10.199.0.1/16
  fake-ip-filter:
    # === å±€åŸŸç½‘ä¸è·¯ç”±ç®¡ç† ===
    - '*.lan'
    - '*.local'
    - '*.arpa'
    - '*.home.arpa'
    - '*.srv.nintendo.net' # ä»»å¤©å ‚å±€åŸŸç½‘è”æœº
    - 'miwifi.com'         # å°ç±³è·¯ç”±
    - 'router.asus.com'    # åç¡•è·¯ç”±
    - 'router.synology.com' # ç¾¤æ™–è·¯ç”±
    - 'plext.com'          # åç¡•ç›¸å…³
    - 'amplifi.lan'
    - 'ubnt.pool.ntp.org'

    # === ç³»ç»Ÿè¿é€šæ€§æ£€æµ‹ (é˜²æ­¢ç½‘ç»œå›¾æ ‡æ˜¾ç¤ºæ„Ÿå¹å·) ===
    # Windows
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'
    # Android / Google
    - 'connectivitycheck.gstatic.com'
    - 'connectivitycheck.android.com' # è¾ƒæ—§çš„å®‰å“
    # Apple
    - 'captive.apple.com'
    - 'hotspot.csl.com.hk' # æŸäº›åœ°åŒºè‹¹æœæ£€æµ‹
    - 'www.appleiphonecell.com'

    # === NTP æ—¶é—´åŒæ­¥æœåŠ¡ (å¿…é¡»çœŸå®IP) ===
    - 'time.*.com'
    - 'ntp.*.com'
    - '*.pool.ntp.org'
    - 'time.nist.gov'
    - 'time.apple.com'
    - 'time.asia.apple.com'
    - 'time.windows.com'
    - 'time.google.com'

    # === æ¸¸æˆä¸ STUN æœåŠ¡ (æ”¹å–„ NAT ç±»å‹) ===
    # å°½ç®¡ä½ åœ¨è§„åˆ™é‡Œå±è”½äº† UDP STUNï¼Œä½†ä¿ç•™è¿™äº›åœ¨ filter åˆ—è¡¨æ˜¯å¥½ä¹ æƒ¯
    - '*.stun.*'
    - '*.stun.*.*'
    - '+.stun.playstation.net'
    - 'xbox.*.microsoft.com'
    - 'xbox.*.xboxlive.com'
    - '+.xboxlive.com'
    - 'speedtest.cros.wr.pvp.net' # è‹±é›„è”ç›Ÿæ‰‹æ¸¸æµ‹é€Ÿ

    # === ç™»å½•è®¤è¯ä¸ç‰¹å®šå›½å†…æœåŠ¡ ===
    - 'localhost.ptlogin2.qq.com' # QQ å¿«æ·ç™»å½•
    - 'localhost.sec.qq.com'
    - '+.market.xiaomi.com'       # å°ç±³åº”ç”¨å•†åº—
    - 'mi.com'
    - '+.update.microsoft.com'    # Windows æ›´æ–°æœ‰æ—¶å€™ FakeIP ä¼šå¡
    - '+.media.dssott.com'        # Disney+ éƒ¨åˆ†éªŒè¯

    # === DDNS ä¸ è¿œç¨‹è®¿é—® ===
    # å¦‚æœä½ æœ‰ç¾¤æ™–æˆ–åç¡•çš„ DDNSï¼Œå»ºè®®åŠ ä¸Š
    - '*.synology.me'
    - '*.asuscomm.com'
    - '*.quickconnect.to'

    # === éŸ³ä¹æœåŠ¡ (é˜²æ­¢ç‰ˆæƒåŒºåŸŸè¯¯åˆ¤) ===
    # ç½‘æ˜“äº‘éŸ³ä¹æœ‰æ—¶å€™é€šè¿‡ IP åˆ¤æ–­ç›´è¿è¿˜æ˜¯ä»£ç†
    - 'music.163.com'
    - '*.music.163.com'
    - '*.126.net'

    # === ä»£ç†å®¢æˆ·ç«¯æœ¬èº« ===
    - 'lens.l.google.com' # Google Lens æœ‰æ—¶éœ€è¦çœŸå® IP
  respect-rules: true
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - 'https://1.1.1.1/dns-query'
    - 'https://8.8.8.8/dns-query'
  proxy-server-nameserver:
    - 'https://doh.pub/dns-query'
    - 'https://dns.alidns.com/dns-query'
  nameserver-policy:
    "geosite:cn,private":
      - 'https://doh.pub/dns-query'
      - 'https://dns.alidns.com/dns-query'
    "geosite:geolocation-!cn":
      - 'https://1.1.1.1/dns-query'
      - 'https://8.8.8.8/dns-query'

# ==================== [æ–°å¢] è‡ªåŠ¨è®¢é˜…æº ====================
# è¿™é‡Œæ˜¯å®ç°è‡ªåŠ¨æ›´æ–°çš„å…³é”®
#proxy-providers:
#  MitceSub: # è®¢é˜…æºåç§°
#    type: http
#    # ä½ çš„è®¢é˜…é“¾æ¥
#    url: "https://app.mitce.net/?sid=399125&token=srvghmxv"
#    path: ./proxies/mitce.yaml # ç¼“å­˜æ–‡ä»¶è·¯å¾„
#    interval: 21600 # æ¯6å°æ—¶è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡
#    health-check:
#      enable: true
#      interval: 600
#      # è‡ªåŠ¨å‰”é™¤ä¸å¯ç”¨çš„èŠ‚ç‚¹
#      url: http://www.gstatic.com/generate_204

# ==================== ä»£ç†èŠ‚ç‚¹ (ä¿ç•™ä½ åŸæœ‰çš„æ‰‹åŠ¨èŠ‚ç‚¹) ====================
proxies:
  - name: vless-ws
    type: vless
    server: cdns.doon.eu.org
    port: 443
    uuid: 168390a0-2beb-4a7b-8a59-31b6661ee0d4
    tls: true
    udp: true
    skip-cert-verify: true
    servername: freedom2.btnalit.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/vless-argo?ed=2560"
      headers:
        Host: freedom2.btnalit.de5.net

  - name: vmess-ws
    type: vmess
    server: cdns.doon.eu.org
    port: 443
    uuid: 168390a0-2beb-4a7b-8a59-31b6661ee0d4
    cipher: auto
    alterId: 0
    tls: true
    udp: true
    skip-cert-verify: true
    servername: freedom2.btnalit.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/vmess-argo?ed=2560"
      headers:
        Host: freedom2.btnalit.de5.net

  - name: trojan-ws
    type: trojan
    server: cdns.doon.eu.org
    port: 443
    password: 168390a0-2beb-4a7b-8a59-31b6661ee0d4
    tls: true
    udp: true
    skip-cert-verify: true
    sni: freedom2.btnalit.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/trojan-argo?ed=2560"
      headers:
        Host: freedom2.btnalit.de5.net

  - name: myfreedom01-SG_Railway_vless-ws
    type: vless
    server: cdns.doon.eu.org
    port: 443
    uuid: 289526a2-f48e-42b4-87d2-5841a75f30e1
    tls: true
    udp: true
    skip-cert-verify: true
    servername: myfreedom01.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/vless-argo?ed=2560"
      headers:
        Host: myfreedom01.yancao.de5.net

  - name: myfreedom01-SG_Railway_vmess-ws
    type: vmess
    server: cdns.doon.eu.org
    port: 443
    uuid: 289526a2-f48e-42b4-87d2-5841a75f30e1
    cipher: auto
    alterId: 0
    tls: true
    udp: true
    skip-cert-verify: true
    servername: myfreedom01.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/vmess-argo?ed=2560"
      headers:
        Host: myfreedom01.yancao.de5.net

  - name: myfreedom01-SG_Railway_trojan-ws
    type: trojan
    server: cdns.doon.eu.org
    port: 443
    password: 289526a2-f48e-42b4-87d2-5841a75f30e1
    tls: true
    udp: true
    skip-cert-verify: true
    sni: myfreedom01.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/trojan-argo?ed=2560"
      headers:
        Host: myfreedom01.yancao.de5.net
        
  - name: Hug-trojan
    type: trojan  
    server: nrtcfdns.zone.id
    port: 443
    password: 5efabea4-f6d4-91fd-b8f0-17e004c89c60
    sni: freedom.btnalit.de5.net
    tls: true
    udp: true    
    skip-cert-verify: true
    network: ws
    client-fingerprint: firefox    
    ws-opts: 
      path: /5efabea4
      headers: 
        Host: freedom.btnalit.de5.net

  - name: Hug-vless
    type: vless  
    server: nrtcfdns.zone.id
    port: 443
    uuid: 5efabea4-f6d4-91fd-b8f0-17e004c89c60
    servername: freedom.btnalit.de5.net
    tls: true
    udp: true    
    skip-cert-verify: true    
    network: ws
    client-fingerprint: firefox    
    ws-opts: 
      path: /5efabea4
      headers: 
        Host: freedom.btnalit.de5.net        

  - name: CFå®˜æ–¹ä¼˜é€‰-1
    type: vless
    server: 162.159.153.64
    port: 443
    uuid: 73a1da26-d8cc-4677-8382-68c0f291a3e0
    tls: true
    udp: true
    skip-cert-verify: true
    servername: home.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/"
      headers:
        Host: home.yancao.de5.net

  - name: CFå®˜æ–¹ä¼˜é€‰-2
    type: vless
    server: 8.39.125.57
    port: 443
    uuid: 73a1da26-d8cc-4677-8382-68c0f291a3e0
    tls: true
    udp: true
    skip-cert-verify: true
    servername: home.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/"
      headers:
        Host: home.yancao.de5.net

  - name: CFå®˜æ–¹ä¼˜é€‰-3
    type: vless
    server: 104.19.51.65
    port: 443
    uuid: 73a1da26-d8cc-4677-8382-68c0f291a3e0
    tls: true
    udp: true
    skip-cert-verify: true
    servername: home.yancao.de5.net
    network: ws
    client-fingerprint: firefox
    ws-opts:
      path: "/"
      headers:
        Host: home.yancao.de5.net
  # ------------------------------------------------
  # ğŸš© ç¬¬1å±‚: æœ¬åœ°å‡ºå£ (Node A)
  # ------------------------------------------------
  # name: "GZ_IPv6_Reality_2409"
  # type: vless
  # server: "2408:8256:1480:74e6:662b:a4ff:fe36:19e2"
  # port: 443
  # uuid: "55ceef53-d700-4db7-836a-4c8d909ba353"
  # network: "tcp"
  # tls: true
  # udp: true
  # flow: "xtls-rprx-vision"
  # client-fingerprint: "chrome"
  # servername: "pan.wo.cn"
  # alpn:
  # - h2
  # - http/1.1
  # reality-opts:
  #   public-key: "LN63IlPpbPsxAbFHF55zg706tnFwD0Dvc-PYOfAK_yY"
  #   short-id: "a8b5c0d0"

  # ------------------------------------------------
  # ğŸš€ ç¬¬2å±‚ (Node B) - VLESS åè®®
  # ------------------------------------------------
  - name: "USA-bwh81_grpc"
    type: vless
    server: "2607:8700:5500:6c7c::2"
    port: 443
    uuid: "a70bddd2-daaa-4e75-94f7-7be2bd767302"
    network: "grpc"
    tls: true
    udp: true
    client-fingerprint: "chrome"
    servername: "www.microsoft.com"
    alpn:
    - h2
    reality-opts:
      public-key: "PBCWTaX7yenZi3MUtm3kKBWapcwSHgj9yU10G4MLoxM"
      short-id: "e2d05a4b"
    grpc-opts:
      grpc-service-name: "drive"

  # ------------------------------------------------
  # ğŸ†• ç¬¬2å±‚ (Node B) - AnyTLS (Trojan) åè®®
  # ğŸ”´ å…³é”®ä¿®æ­£ï¼šæ·»åŠ äº† dialer-proxy å’Œ skip-cert-verify
  # ------------------------------------------------
  - name: "USA-bwh81-AnyTLS_8443"
    type: anytls
    server: "2607:8700:5500:6c7c::2"
    port: 8443
    password: "66668888" # å¯¹åº”æœåŠ¡ç«¯çš„ value
    sni: "btnalit.publicvm.com"
    alpn:
      - h2
      - http/1.1
    udp: true
    skip-cert-verify: true # âš ï¸ å¿…å¡«ï¼šæœåŠ¡ç«¯å¯èƒ½æ˜¯è‡ªç­¾è¯ä¹¦
    # ğŸ”¥ æ ¸å¿ƒä¿®æ­£ï¼šå› ä¸ºæ˜¯åŒä¸€ä¸ªè¿œç¨‹IPï¼Œå¿…é¡»é€šè¿‡ Node A è½¬å‘ï¼Œå¦åˆ™æ— æ³•è¿æ¥
    #dialer-proxy: "GZ_IPv6_Reality_2409"

  # ------------------------------------------------
  # ğŸ ç¬¬3å±‚: PCDNä¸“ç”¨ (SSå†…ç½‘)
  # ------------------------------------------------
  - name: "USA-bwh81_Final_SS"
    type: ss
    server: "127.0.0.1"
    port: 10086
    cipher: "2022-blake3-aes-128-gcm"
    password: "ovKZW39wYKjnrfsXOAn5Xw=="
    udp: true
    # è¿™é‡Œä¾ç„¶é€šè¿‡ VLESS é“¾è·¯ï¼Œå¦‚æœ AnyTLS é€šäº†ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆ AnyTLS_Trojan_8443
    dialer-proxy: "USA-bwh81_grpc"
    
  - name: "sk5-de"
    type: socks5
    server: 178.95.172.75
    port: 12324
    username: 14a384aeb29dd
    password: 6e8dee927f
    udp: true
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    dialer-proxy: è‡ªåŠ¨é€‰æ‹©    
    
# ==================== ç­–ç•¥ç»„ ====================
proxy-groups:
  - name: PROXY
    type: select
    # [ä¿®æ”¹ç‚¹] å¼•å…¥è®¢é˜…æº
    #use:
     # - MitceSub
    proxies:
      - freedom2è´Ÿè½½å‡è¡¡
      - Hugè´Ÿè½½å‡è¡¡
      - CFè´Ÿè½½å‡è¡¡      
      - è‡ªåŠ¨é€‰æ‹©
      - vless-ws
      - vmess-ws
      - trojan-ws
      - myfreedom01-SG_Railway_vless-ws
      - myfreedom01-SG_Railway_vmess-ws
      - myfreedom01-SG_Railway_trojan-ws      
      - Hug-trojan
      - Hug-vless
      - CFå®˜æ–¹ä¼˜é€‰-1
      - CFå®˜æ–¹ä¼˜é€‰-2
      - CFå®˜æ–¹ä¼˜é€‰-3
      - USA-bwh81_grpc
      - USA-bwh81-AnyTLS_8443
      - USA-bwh81_Final_SS      
      - DIRECT

  - name: freedom2è´Ÿè½½å‡è¡¡
    type: load-balance
    proxies:
      - vless-ws
      - vmess-ws
      - trojan-ws
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    strategy: consistent-hashing

  - name: Hugè´Ÿè½½å‡è¡¡
    type: load-balance
    proxies:
      - Hug-trojan
      - Hug-vless
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    strategy: consistent-hashing

  - name: CFè´Ÿè½½å‡è¡¡
    type: load-balance
    proxies:
      - CFå®˜æ–¹ä¼˜é€‰-1
      - CFå®˜æ–¹ä¼˜é€‰-2
      - CFå®˜æ–¹ä¼˜é€‰-3    
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    strategy: consistent-hashing

  - name: myfreedom01
    type: load-balance
    proxies:
      - myfreedom01-SG_Railway_vless-ws
      - myfreedom01-SG_Railway_vmess-ws
      - myfreedom01-SG_Railway_trojan-ws   
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    strategy: consistent-hashing    
   
  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    # [ä¿®æ”¹ç‚¹] å¼•å…¥è®¢é˜…æºï¼Œè®©è®¢é˜…èŠ‚ç‚¹ä¹Ÿå‚ä¸è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©
    #use:
     # - MitceSub
    proxies:
      - vless-ws
      - vmess-ws
      - trojan-ws
      - myfreedom01-SG_Railway_vless-ws
      - myfreedom01-SG_Railway_vmess-ws
      - myfreedom01-SG_Railway_trojan-ws      
      - Hug-trojan
      - Hug-vless
      - CFå®˜æ–¹ä¼˜é€‰-1
      - CFå®˜æ–¹ä¼˜é€‰-2
      - CFå®˜æ–¹ä¼˜é€‰-3      
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50

# ==================== è§„åˆ™é›† ====================
rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./rules/reject.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./rules/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./rules/private.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./rules/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./rules/lancidr.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./rules/proxy.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./rules/google.yaml
    interval: 86400
  stun:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/STUN/STUN.yaml"
    path: ./rules/STUN.yaml
    interval: 86400

  specialport:
    type: http
    behavior: classical
    url: "https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Port_Direct.yaml"
    path: ./rules/Custom_Port_Direct.yaml
    interval: 86400
    
  TikTok-Site:
    type: http
    behavior: domain
    format: mrs
    url: "https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/TikTok/TikTok-Site.mrs"
    path: ./ruleset/TikTok-Site.mrs
    proxy: DIRECT
    interval: 86400    

  OpenAI-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/OpenAI/OpenAI-Site.mrs'
    path: ./ruleset/OpenAI-Site.mrs
    proxy: DIRECT
    interval: 86400
    
  OpenAI-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/OpenAI/OpenAI-IP.mrs'
    path: ./ruleset/OpenAI-IP.mrs
    proxy: DIRECT
    interval: 86400
    
  Speedtest-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Speedtest/Speedtest-Site.mrs'
    path: ./ruleset/Speedtest-Site.mrs
    proxy: DIRECT
    interval: 86400
    
  Telegram-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Telegram/Telegram-Site.mrs'
    path: ./ruleset/Telegram-Site.mrs
    proxy: DIRECT
    interval: 86400
    
  Telegram-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Telegram/Telegram-IP.mrs'
    path: ./ruleset/Telegram-IP.mrs
    proxy: DIRECT
    interval: 86400

  Telegram-cidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./rules/telegramcidr.yaml
    interval: 86400

  Telegram-No_Resolve:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram_No_Resolve.yaml"
    path: ./rules/Telegram_No_Resolve.yaml
    interval: 86400      
    
  Google-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Google/Google-Site.mrs'
    path: ./ruleset/Google-Site.mrs
    proxy: DIRECT
    interval: 86400
    
  Google-IP:
    type: http
    behavior: ipcidr
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Google/Google-IP.mrs'
    path: ./ruleset/Google-IP.mrs
    proxy: DIRECT
    interval: 86400
    
  GoogleFCM-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/GoogleFCM/GoogleFCM-Site.mrs'
    path: ./ruleset/GoogleFCM-Site.mrs
    proxy: DIRECT
    interval: 86400

  GFWList-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/GFWList/GFWList-Site.mrs'
    path: ./ruleset/GFWList-Site.mrs
    proxy: DIRECT
    interval: 86400

  Microsoft-Site:
    type: http
    behavior: domain
    format: mrs
    url: 'https://cdn.jsdmirror.com/gh/HosheaPDNX/rule-set@V2.0.0/mihomo/Microsoft/Microsoft-Site.mrs'
    path: ./ruleset/Microsoft-Site.mrs
    proxy: DIRECT
    interval: 86400    
# ==================== è§„åˆ™ ====================
rules:
  # 0. 443ï¼Œ8443å’Œ80,8080æ‹¦æˆª
  - 'AND,((DST-PORT,443),(NETWORK,UDP)),REJECT'
  - 'AND,((DST-PORT,8443),(NETWORK,UDP)),REJECT' 
  - 'AND,((DST-PORT,80),(NETWORK,UDP)),REJECT'
  - 'AND,((DST-PORT,8080),(NETWORK,UDP)),REJECT'
  
  # 1. å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,reject,REJECT

  # 2. Telegramå•ç‹¬æ”¾è¡Œ
  - RULE-SET,Telegram-Site,freedom2è´Ÿè½½å‡è¡¡,no-resolve
  - RULE-SET,Telegram-IP,freedom2è´Ÿè½½å‡è¡¡,no-resolve
  - RULE-SET,Telegram-cidr,freedom2è´Ÿè½½å‡è¡¡,no-resolve
  - RULE-SET,Telegram-No_Resolve,freedom2è´Ÿè½½å‡è¡¡,no-resolve  
  
  # 3. STUN å¼ºåŠ›é˜»æ–­
  - RULE-SET,stun,REJECT
  - AND,((NETWORK,UDP),(DST-PORT,19302)),REJECT
  - AND,((NETWORK,UDP),(DST-PORT,3478)),REJECT  
  
  # 4. å±€åŸŸç½‘/ç§æœ‰åœ°å€ç›´è¿
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,private,DIRECT
  #- RULE-SET,direct,DIRECT
  - GEOIP,PRIVATE,DIRECT,no-resolve
  
  # 5. googleå•ç‹¬æ”¾è¡Œ
  - RULE-SET,google,è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,Google-Site,è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,Google-IP,è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,GoogleFCM-Site,è‡ªåŠ¨é€‰æ‹©  

  # 6. å…¶ä»–æ˜ç»†åº”ç”¨å•ç‹¬æ”¾è¡Œ
  - RULE-SET,TikTok-Site,freedom2è´Ÿè½½å‡è¡¡
  - RULE-SET,OpenAI-Site,freedom2è´Ÿè½½å‡è¡¡
  - RULE-SET,OpenAI-IP,freedom2è´Ÿè½½å‡è¡¡
  - RULE-SET,Speedtest-Site,CFè´Ÿè½½å‡è¡¡

  # 7. å›½å†…ç›´è¿
  - GEOSITE,cn,DIRECT
  - GEOIP,CN,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,Microsoft-Site,DIRECT

  # 8. å…¶ä»–æ±‡æ€»å¤§ç±»æŒ‡å®šèµ°ä»£ç†çš„è§„åˆ™
  - RULE-SET,GFWList-Site,è‡ªåŠ¨é€‰æ‹©  
  - RULE-SET,proxy,è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,specialport,è‡ªåŠ¨é€‰æ‹©  
   
  # 9. æœ€ç»ˆå…œåº•
  - MATCH,è‡ªåŠ¨é€‰æ‹©